<draught-header></draught-header>

<ion-content class="ion-padding">
  <ion-row>
    <ion-col class="below-header ion-text-center" size="12" sizeSm="10" offsetSm="1" sizeMd="6" offsetMd="3" sizeLg="6" offsetLg="3" sizeXl="4" offsetXl="4">

      <h1>Tell us about the beer you like!</h1>

      <p><i>The more you tell us the better we can recommend beers.</i></p>

      <ion-row>
        <h3>Select some of your favorites:</h3>
        <ion-auto-complete class="ion-text-left" tid="enterBeerInput"
                           [(ngModel)]="beerSearch"
                           (itemSelected)="favoriteSelected($event)"
                           [dataProvider]="beerProvider"></ion-auto-complete>
      </ion-row>

      <div *ngFor="let b of user?.favorite_beers">
        <ion-item>
          {{ b.name }}
          <ion-buttons slot="end">
            <ion-button>
              <b (click)="removeFavorite(b)">X</b>
            </ion-button>
          </ion-buttons>
        </ion-item>
      </div>

      <h2>Ranges of ABV and IBU</h2>

      <ion-row class="ion-text-center">
        <ion-col>
          <h3>ABV
              <ion-icon
                  slot="end" color="primary"
                  name="information-circle" class="infoButton" tid="abvInfoButton"
                  routerLink="./abv-info" routerDirection="forward"></ion-icon>
          </h3>
        </ion-col>

        <ion-col>
          <h3>IBU
              <ion-icon color="primary" name="information-circle"
                        class="infoButton" tid="ibuInfoButton"
                        routerLink="./ibu-info" routerDirection="forward"></ion-icon>
          </h3>
        </ion-col>
      </ion-row>

      <form [formGroup]="prefsForm" (ngSubmit)="savePrefs()">
        <ion-row class="ion-text-center">
          <ion-col class="ion-text-center">
            <ion-item>
              <ion-label color="primary" position="floating">High</ion-label>
              <ion-input type="number" formControlName="abv_hi" tid="enterAbvHigh" [(ngModel)]="prefs.abv_hi"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label color="primary" position="floating">Low</ion-label>
              <ion-input type="number" formControlName="abv_low" tid="enterAbvLow" [(ngModel)]="prefs.abv_low"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col class="ion-text-center">
            <ion-item>
              <ion-label color="primary" position="floating">High</ion-label>
              <ion-input type="number" formControlName="ibu_hi" tid="enterIbuHigh" [(ngModel)]="prefs.ibu_hi"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label color="primary" position="floating">Low</ion-label>
              <ion-input type="number" formControlName="ibu_low" tid="enterIbuLow" [(ngModel)]="prefs.ibu_low"></ion-input>
            </ion-item>
          </ion-col>

        </ion-row>

        <ion-row class="ion-margin">
          <h2>Describe your favorite beer(s) below:
                <ion-icon color="primary" name="information-circle"
                          class="infoButton" tid="descInfoButton" routerLink="./beer-favorite-info"></ion-icon>
          </h2>
        </ion-row>

        <ion-row>
          <ion-textarea
              formControlName="like_description"
              tid="enterTextArea"
              rows="7"
              [(ngModel)]="prefs.like_description">
          </ion-textarea>
        </ion-row>
          <ion-button
              tid="submitBtn"
              [disabled]="prefsForm.invalid">
            Submit
          </ion-button>
      </form>
    </ion-col>
  </ion-row>
</ion-content>
